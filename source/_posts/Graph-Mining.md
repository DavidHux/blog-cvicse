---
title: 基于机器学习的质监预测技术
date: 2018-7-7 12:39:26
tags: 项目纪要
description: 根据已有部分抽检产品信息和检测结果，根据他们之间的关系，包括产品所属公司，公司之间的投资关系，人员关系等，构建模型，对所有未检测产品进行分类，预测它们可能的检测结果。

---
## 介绍

现有一批质监局数据，导出自某数据库，包含的基本关系有：

|    数据    | 数量 |
|  -- |  -- |
| 企业基本信息| 165万 | 
| 企业投资信息表 |  1248 | 
| 监督检查企业产品信息表|  27534 | 
| 产品基本信息 | 21955| 
| 企业产品信息关联表 | 7379| 
| 企业标准/认证/资质/荣誉信息关联表  | 1419 | 
| 企业分支机构基本信息关联表  |  20| 
| 企业股东信息 |  426 | 
| 企业高管信息  |  699 | 
| 企业官网信息关联表 |   672 | 
| 特种设备基本信息 | 1162098 | 
| 特种设备作业人员情况 |   57684 | 
| 特种设备作业人员信息 |  2873 | 
| 人员基本信息表 | 702573 | 

根据以上主要关系，可以构建包含企业、产品、法人、投资关系等的图模型，如下所示。主要包括，企业所生产的产品、企业股东、法人等。

![rel](/images/rel2.png)

背景：质监局会对企业产品进行质量检测，反馈合格或者不合格，另外还有对整个公司的检测结果（这里并不确定是怎么来的。

任务：根据已有部分抽检产品信息和检测结果，根据他们之间的关系，包括产品所属公司，公司之间的投资关系，人员关系等，构建模型，对所有未检测产品进行分类，预测它们可能的检测结果。

任务特征：

- 节点具有多种类型，包括产品、公司、人等；
- 产品的相似度可能跟他们所属的公司有关，与它们所属的产品类型有关等；
- 单从画的几个节点类型和关系类型，整个图是否完全连同，或者有太多分枝，每个都属于小的子图。

任务抽象：

- 属于异质图上的半监督学习问题，监督目标为部分节点的类别。
- 亦可将问题拆分成两个步骤，分别是无监督的特征表示学习，加上监督的分类问题（目前尚无直接可用的带节点属性的异质网络上的节点特征学习方法）。

## 现有工作和算法

### PTE

> Jian Tang, Meng Qu, Qiaozhu Mei. [PTE: Predictive Text Embedding through Large-scale Heterogeneous Text Networks](https://arxiv.org/pdf/1508.00200.pdf). KDD 2015.

该工作是对异质网络（即包含多种类型的节点和边的网络）中的每个节点学习生成较低维度空间的嵌入表达（embedding）。根据得到的嵌入表达，可以进行基本的分类、聚类等任务。主要方法是将异质网络拆分成多个同质网络进行处理。

不符合之处：该工作未使用节点属性。另外，该工作适用的前提是异质网络可以拆分成多个同质网络（给定两个点，他们之间的边只有一种类型）。

### metapath2vec

> Dong Y, Chawla N V, Swami A. [metapath2vec: Scalable representation learning for heterogeneous networks](https://dl.acm.org/citation.cfm?id=3098036). KDD 2017.

该工作是对异质网络中的每个节点学习生成较低维度空间的嵌入表达。根据得到的嵌入表达，可以进行基本的分类、聚类等任务。

不符合之处：第一，该工作属于无监督学习，暂未使用监督信息；第二，该工作暂未使用节点属性。

### GCN

> Kipf T N, Welling M. [Semi-supervised classification with graph convolutional networks](https://arxiv.org/abs/1609.02907). ICLR 2017.

改工作是在普通同质网络（相对前面异质网络而言，即网络的节点和边只有一种类型）上使用GCN（graph convolutional networks）方法做的半监督分类问题。

不符合之处：该工作处理同质网络，忽略了异质网络的信息。

### GraphSAGE

> Hamilton W, Ying Z, Leskovec J. [Inductive representation learning on large graphs](https://arxiv.org/abs/1706.02216). NIPS 2017.

该工作是基于上一篇的改良的无监督学习版本。

## 方法

姚老师给出了如下解决方法：

1. 直接将异质网络简化成同质网络，然后使用GCN。GCN天生可以处理节点属性，并且是半监督学习方法，直接可以用于当前任务。

2. 将异质网络拆分成同质网络（可能损失部分信息），然后用PTE学习节点表达。然后将PTE学习的节点表达与节点属性拼接起来做监督学习。

3. 使用metapath2vec在异质网络上得到节点表达。然后将metapath2vec学习的节点表达与节点属性拼接起来做监督学习。

4. 结合上述工作，开发新的带节点属性的异质网络上的节点特征学习方法。（这种方法可能需要修改现有的方法与代码，工作量与创新性要求较大。）

## 计划

1. 仔细分析已有数据，将已有数据进行过滤，去掉关系中不需要的属性；并转化成图的数据结构。
2. 在理解数据的基础上，进行异质网络到同质网路的简化，或异质网络到同质网络的拆分。
3. 跑一些GCN、PTE、metapath2vect的实验（代码均公开）。